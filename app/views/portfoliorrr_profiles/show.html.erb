<%= render 'shared/project_header', project: @project %>

<% if @portfoliorrr_profile.present? %>
  <section>
    <div class="container">
      <div class="row">
        <h3 class="mb-3"><%= t('profile', name: @portfoliorrr_profile.name) %></h3>
        <div class="col-lg-8">
          <div class="card mb-4">
            <div class="card-body">
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0"><%= t('portfoliorrr_profile.attributes.name') %></p>
                </div>
                <div class="col-sm-9">
                  <p class="text-muted mb-0"><%= @portfoliorrr_profile.name %></p>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0"><%= t('portfoliorrr_profile.attributes.email') %></p>
                </div>
                <div class="col-sm-9">
                  <p class="text-muted mb-0"><%= @portfoliorrr_profile.email %></p>
                </div>
              </div>
            </div>
          </div>
          <% @portfoliorrr_profile.job_categories.each do |category| %>
            <div class="row">
              <div class="col-md-6">
                <div class="card mb-4 mb-md-4">
                  <div class="card-body">
                    <h4><%= category.name %></h4>
                    <hr>
                    <h6><%= category.description %></h6>
                  </div>
                </div>
              </div>
            </div>
          <% end %>

          <h2><%= t('portfoliorrr_profile.attributes.education_infos')%></h2>

          <% @portfoliorrr_profile.education_infos&.each do |education| %>
            <div class="row">
              <div class="col-md-6">
                <div class="card mb-4 mb-md-4">
                  <div class="card-body">
                    <h4><%= education[:institution] %></h4>
                    <hr>
                    <p><strong><%= t('portfoliorrr_profile.attributes.institution') %>:</strong> <%= education[:institution] %></p>
                    <p><strong><%= t('portfoliorrr_profile.attributes.course') %>:</strong> <%= education[:course] %></p>
                    <p><strong><%= t('portfoliorrr_profile.attributes.start_date') %>:</strong> <%= l education[:start_date] %></p>
                    <p><strong><%= t('portfoliorrr_profile.attributes.end_date') %>:</strong> <%= l education[:end_date] %></p>
                  </div>
                </div>
              </div>
            </div>
          <% end %>

          <h2><%= t('portfoliorrr_profile.attributes.professional_infos') %></h2>

          <% @portfoliorrr_profile.professional_infos&.each do |professional| %>
            <div class="row">
              <div class="col-md-6">
                <div class="card mb-4 mb-md-4">
                  <div class="card-body">
                    <h4><%= professional[:company] %></h4>
                    <hr>
                    <p><strong><%= t('portfoliorrr_profile.attributes.position') %>:</strong> <%= professional[:position] %></p>
                    <p><strong><%= t('portfoliorrr_profile.attributes.start_date') %>:</strong> <%= l professional[:start_date] %></p>
                    <p><strong><%= t('portfoliorrr_profile.attributes.end_date') %>:</strong> <%= l professional[:end_date] %></p>
                    <p><strong><%= t('portfoliorrr_profile.attributes.description') %>:</strong> <%= professional[:description] %></p>
                    <p><strong><%= t('portfoliorrr_profile.attributes.current_job') %>:</strong> <%= professional[:current_job] ? t('positive') : t('negative') %></p>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        </div>

        <div class="col-lg-4">
          <div class="card mb-4">
            <div class="card-body text-center">
              <h5 class="my-3"><%= t('portfoliorrr_profile.attributes.cover_letter') %></h5>
              <h4 class="mb-4"><%= @portfoliorrr_profile.cover_letter %></h4>
            </div>
          </div>
          <%= render partial: 'invitation_form', 
                     locals: { current_invitation: @current_invitation,
                               invitation: @invitation,
                               profile: @portfoliorrr_profile,
                               project: @project,
                               current_proposal: @current_proposal } %>
        </div>
      </div>
    </div>
  </section>
<% else %>
  <h3><%= t('profile_not_available') %></h3>
  <h3><%= t('try_again_later') %></h3>
<% end %>
