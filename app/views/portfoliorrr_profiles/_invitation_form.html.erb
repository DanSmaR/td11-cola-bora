<h3 class="mb-3"><%= t('sending_invitation')%></h3>

<% if invitation.errors.any? %>
  <div class='text-danger'>
    <h3><%= I18n.t('.errors_title') %>:</h3>
    <ul>
      <% invitation.errors.each do |error| %>
        <li><%= error.full_message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<% if current_invitation.present? %>
  <p><%= I18n.t('invitations.create.pending_invitation') %></p>
  
  <% unless current_invitation.message.blank? %>
    <p><%= Invitation.human_attribute_name :message %>: <%= current_invitation.message  %></p>
  <% end %>

  <p>
    <%= Invitation.human_attribute_name :expiration_date %>: 
    <%= current_invitation.expiration_date ? l(current_invitation.expiration_date) : I18n.t('invitations.no_expiration_date') %>
  </p>

  <%= button_to I18n.t('invitations.cancel_button'), cancel_invitation_path(current_invitation.id),
                method: :patch, class: 'btn btn-danger' %>
<% else %>
  <%= form_with(model: invitation, url: project_portfoliorrr_profile_invitations_path(project, profile.id), local: true) do |form| %>
    <div class="mb-3">
      <div class="row">
        <div class="col-2"></div>
          <%= form.label :expiration_days, class: 'form-label' %>
          <%= form.number_field :expiration_days, class: 'form-control', min: 0 %>
        </div>
        <div class="col-2"></div>
          <%= form.label :message, class: 'form-label' %>
          <%= form.text_area :message, class: 'form-control' %>
          <%= form.hidden_field :profile_email, value: profile.email %>
        </div>
        <div class="d-flex justify-content-center mb-2">
          <%= form.submit I18n.t('invitations.send_invitation'), class: 'btn btn-primary' %>
        </div>
      </div>
    </div>   
  <% end %>
<% end %>
